"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ec2Provider_1 = require("./providers/ec2Provider");
var rdsProvider_1 = require("./providers/rdsProvider");
var elastiCacheProvider_1 = require("./providers/elastiCacheProvider");
var reservedInstanceCalculator_1 = require("./services/reservedInstanceCalculator");
var slackHelper_1 = require("./services/slackHelper");
var app_1 = require("./apps/app");
function CheckAwsReservedInstance() {
    var webhookUrl = process.env.RICHECKER_WEBHOOK_URL;
    var region = process.env.RICHECKER_REGION || 'us-east-1';
    var channel = process.env.RICHECKER_SLACK_CHANNEL;
    if (!webhookUrl) {
        throw new Error('Webhook url is not set, please check your environment variable RICHECKER_WEBHOOK_URL');
    }
    var result = new app_1.default([
        new ec2Provider_1.default(region),
        new rdsProvider_1.default(region),
        new elastiCacheProvider_1.default(region)
    ], new reservedInstanceCalculator_1.default(), new slackHelper_1.default(region, webhookUrl, channel)).Run();
    return result;
}
exports.default = CheckAwsReservedInstance;
CheckAwsReservedInstance();
